<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        h1, h2 {
            color: #333;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 40px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        a.button {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            background-color: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            text-align: center;
        }
        a.logout {
            background-color: #f44336;
        }
        form {
            text-align: center;
            margin-bottom: 20px;
        }
        form input[type="text"] {
            padding: 10px;
            width: 300px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        form button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        form button:hover {
            background-color: #45a049;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            table {
                font-size: 14px;
            }
            a.button {
                font-size: 14px;
                padding: 8px 16px;
            }
            form input[type="text"] {
                width: 80%;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 24px;
            }
            a.button {
                font-size: 12px;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>

    <h1>Welcome to the MY PROJECT</h1>

    <div style="text-align: center;">
        <a href="{% url 'logout' %}" class="button logout">Logout</a>
        <a href="{% url 'add_student' %}" class="button">Add Student</a>
        <a href="{% url 'add_teacher' %}" class="button">Add Teacher</a>
        <a href="{% url 'add_student_attendance' %}" class="button">Add Student Attendance</a>
        <a href="{% url 'add_teacher_attendance' %}" class="button">Add Teacher Attendance</a>
    </div>

    <form method="GET" action="{% url 'search' %}">
        <input type="text" name="q" placeholder="Search by name..." required>
        <button type="submit">Search</button>
    </form>

    <h2>Students</h2>
<table>
    <tr>
        <th>Name</th>
        <th>Student ID</th>
        <th>Marks</th>
        <th>Total Fee</th>
        <th>Fee Paid</th>
        <th>Fee Balance</th>
    </tr>
    {% for student in student_data %}
    <tr>
        <td>{{ student.student.name }}</td>
        <td>{{ student.student.student_id }}</td>
        <td>
            {{ student.student.subject1 }},
            {{ student.student.subject2 }},
            {{ student.student.subject3 }},
            {{ student.student.subject4 }}
        </td>
        <td>{{ student.student.total_fee }}</td>
        <td>{{ student.student.fee_paid }}</td>
        <td>{{ student.fee_balance }}</td>
    </tr>
    {% endfor %}
</table>


    <h2>Teachers</h2>
    <table>
        <tr>
            <th>Name</th>
            <th>Class Handled</th>
            <th>Total Salary</th>
            <th>Salary Obtained</th>
            <th>Salary Balance</th>
        </tr>
        {% for entry in teacher_data %}
        <tr>
            <td>{{ entry.teacher.name }}</td>
            <td>{{ entry.teacher.class_handled }}</td>
            <td>{{ entry.teacher.total_salary }}</td>
            <td>{{ entry.teacher.salary_obtained }}</td>
            <td>{{ entry.salary_balance }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="5">No teacher data available.</td></tr>
        {% endfor %}
    </table>

    <h2>Recent Student Attendance</h2>
    <table>
        <tr>
            <th>Name</th>
            <th>Date</th>
            <th>Status</th>
        </tr>
        {% for entry in student_attendance %}
        <tr>
            <td>{{ entry.student.name }}</td>
            <td>{{ entry.date }}</td>
            <td>{{ entry.status }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="3">No student attendance data.</td></tr>
        {% endfor %}
    </table>

    <h2>Recent Teacher Attendance</h2>
    <table>
        <tr>
            <th>Name</th>
            <th>Date</th>
            <th>Status</th>
        </tr>
        {% for entry in teacher_attendance %}
        <tr>
            <td>{{ entry.teacher.name }}</td>
            <td>{{ entry.date }}</td>
            <td>{{ entry.status }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="3">No teacher attendance data.</td></tr>
        {% endfor %}
    </table>

</body>
</html>
